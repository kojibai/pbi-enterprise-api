/* ==============================
   PBI Attester (DEMO / TOOL)
   Final Production Styles (No Tailwind)
   Atlantean · Krystalline · Frosted Glass
============================== */

/* Safe areas */
@supports (padding: env(safe-area-inset-top)) {
  .krystal-wrap {
    padding-top: calc(18px + env(safe-area-inset-top));
    padding-bottom: calc(38px + env(safe-area-inset-bottom));
  }
}

:root{
  --bg0:#05070e;
  --bg1:#070b18;

  --ink:#eaf3ff;
  --muted:rgba(234,243,255,.72);
  --muted2:rgba(234,243,255,.56);

  --line:rgba(255,255,255,.10);
  --line2:rgba(255,255,255,.16);

  --glass:rgba(255,255,255,.06);
  --glass2:rgba(255,255,255,.09);
  --blackGlass:rgba(0,0,0,.24);

  --mint: rgba(120,255,231,.95);
  --mintSoft: rgba(120,255,231,.14);

  --shadow: 0 20px 60px rgba(0,0,0,.55);
  --shadow2: 0 10px 30px rgba(0,0,0,.35);
  --shadow3: 0 30px 110px rgba(0,0,0,.50);

  --radius: 18px;
  --radius2: 26px;

  --pad: 16px;
  --pad2: 22px;

  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
  --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

*{ box-sizing:border-box; }
html, body { height:100%; width:100%; max-width:100%; }
body{
  margin:0;
  font-family:var(--sans);
  color:var(--ink);

  /* Background (single source of truth) */
  background:
    radial-gradient(1200px 800px at 20% 10%, rgba(120,255,231,.12), transparent 55%),
    radial-gradient(900px 700px at 80% 20%, rgba(140,155,255,.10), transparent 60%),
    radial-gradient(1100px 900px at 60% 90%, rgba(255,190,120,.08), transparent 55%),
    linear-gradient(180deg, var(--bg0), var(--bg1));

  overflow-x:hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: geometricPrecision;
}

a{ color:inherit; }

.krystal-wrap{
  max-width: 980px;
  margin: 0 auto;
  padding: 26px 16px 48px;
  width: 100%;
}

/* Prevent any child from forcing horizontal scroll (mobile hardening) */
.krystal-wrap, .header, .card, .status, .split, .grid { max-width: 100%; min-width: 0; }
.grid > *, .split > * { min-width: 0; }

/* ======================
   Header
====================== */

.header{
  position:relative;
  padding: 18px 18px 16px;
  border-radius: var(--radius2);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  border: 1px solid var(--line);
  box-shadow: var(--shadow2);
  overflow:hidden;
}

/* Subtle halo behind header – NOT an overlay across the page */
.header::before{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(600px 260px at 20% 0%, rgba(120,255,231,.16), transparent 60%),
    radial-gradient(560px 240px at 80% 20%, rgba(130,170,255,.14), transparent 60%);
  filter: blur(12px);
  opacity:.9;
  pointer-events:none;
}

.header-inner{
  position:relative;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 18px;
  min-width: 0;
}

.title{
  margin:0;
  font-size: 22px;
  letter-spacing:.2px;
  line-height: 1.15;
}

.subtitle{
  margin:6px 0 0;
  color: var(--muted);
  line-height: 1.45;
  font-size: 13px;
  max-width: 720px;
}

.badge{
  position:relative;
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  border-radius: 999px;
  border:1px solid var(--line2);
  background: rgba(0,0,0,.24);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: 0 10px 25px rgba(0,0,0,.25);
  font-size: 12px;
  color: rgba(234,243,255,.86);
  white-space:nowrap;
  flex: 0 0 auto;
}

.dot{
  width:10px; height:10px;
  border-radius:999px;
  background: rgba(120,255,231,.85);
  box-shadow:
    0 0 0 3px rgba(120,255,231,.12),
    0 0 18px rgba(120,255,231,.25);
}

/* ======================
   Layout
====================== */

.grid{
  margin-top: 14px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

@media (max-width: 760px){
  .header-inner{ flex-direction:column; align-items:stretch; }
  .badge{ align-self:flex-start; }
  .grid{ grid-template-columns: 1fr; }
}

/* ======================
   Cards — Krystalline Frost
====================== */

.card{
  position:relative;
  border-radius: var(--radius);
  background: rgba(255,255,255,.06);
  border: 1px solid var(--line);
  box-shadow: var(--shadow2);
  overflow:hidden;
}

/*
  IMPORTANT:
  Your old overlay issue is usually caused by large gradients
  inside ::after that darken/veil content. Keep it very subtle.
*/
.card::after{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(520px 260px at 18% 10%, rgba(120,255,231,.08), transparent 62%),
    radial-gradient(560px 280px at 82% 18%, rgba(150,170,255,.08), transparent 62%);
  opacity:.85;
  pointer-events:none;
  filter: blur(10px);
}

.card-inner{
  position:relative;
  padding: var(--pad2);
  min-width:0;
}

.label{
  font-size: 12px;
  color: rgba(234,243,255,.78);
  margin-bottom: 8px;
  letter-spacing: .22px;
}

/* ======================
   Inputs
====================== */

.input{
  width:100%;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.22);
  color: var(--ink);
  outline:none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
  min-width: 0;
}

.input:focus{
  border-color: rgba(120,255,231,.35);
  box-shadow:
    0 0 0 4px rgba(120,255,231,.10),
    inset 0 1px 0 rgba(255,255,255,.06);
}

.row{
  display:flex;
  gap: 10px;
  align-items:center;
  min-width:0;
}
.row > *{ min-width:0; }

/* Selects match inputs */
select.input{
  appearance: none;
  -webkit-appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(255,255,255,.65) 50%),
    linear-gradient(135deg, rgba(255,255,255,.65) 50%, transparent 50%);
  background-position:
    calc(100% - 16px) calc(50% - 3px),
    calc(100% - 11px) calc(50% - 3px);
  background-size: 6px 6px;
  background-repeat: no-repeat;
  padding-right: 34px;
}

/* ======================
   Buttons
====================== */

.actions{
  margin-top: 12px;
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
}

.btn{
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding: 11px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: rgba(234,243,255,.92);
  cursor:pointer;
  user-select:none;
  transition: transform .12s ease, border-color .12s ease, background .12s ease, filter .12s ease;
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  min-width: 0;
}

.btn:hover{
  border-color: rgba(255,255,255,.22);
  background: rgba(255,255,255,.08);
}

.btn:active{ transform: translateY(1px) scale(.99); }

.btn-primary{
  border-color: rgba(120,255,231,.30);
  background: linear-gradient(180deg, rgba(120,255,231,.18), rgba(120,255,231,.08));
}

.btn-ghost{
  background: rgba(0,0,0,.18);
}

.btn:disabled{
  opacity:.55;
  cursor:not-allowed;
  transform:none;
}

/* Always black text on mint/teal (if you use mint in tool later) */
.btn-primary,
.btn-primary:link,
.btn-primary:visited{
  color: rgba(234,243,255,.92);
}

/* ======================
   Status
====================== */

.status{
  margin-top: 12px;
  padding: 14px 16px;
  border-radius: var(--radius);
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.25);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: var(--shadow2);
  min-width: 0;
}

.status-title{
  font-size: 12px;
  color: rgba(234,243,255,.72);
  margin-bottom: 6px;
}

.status-text{
  white-space: pre-wrap;
  line-height: 1.45;
  font-size: 13px;
}

.split{
  margin-top: 12px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  min-width:0;
}
@media (max-width: 900px){
  .split{ grid-template-columns: 1fr; }
}

.pre{
  margin:0;
  font-family: var(--mono);
  font-size: 12px;
  line-height: 1.45;
  color: rgba(234,243,255,.86);
  white-space: pre-wrap;
  overflow-wrap: anywhere;
}

/* ======================
   Pills / separators
====================== */

.section-title{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  margin-bottom: 10px;
  min-width: 0;
}
.section-title > *{ min-width:0; }

.pill{
  font-size: 11px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: rgba(234,243,255,.78);
  max-width: 100%;
}

.mono{ font-family: var(--mono); }

.kline{
  height:1px;
  width:100%;
  background: linear-gradient(90deg, transparent, rgba(120,255,231,.30), rgba(150,170,255,.20), transparent);
  opacity:.9;
}

.small{
  font-size: 12px;
  color: rgba(234,243,255,.70);
}

.icon{
  width: 14px;
  height: 14px;
  border-radius: 999px;
  background: rgba(150,170,255,.20);
  box-shadow: 0 0 0 3px rgba(150,170,255,.10);
}

/* Details */
.details summary{
  cursor: pointer;
  user-select: none;
}
.details summary::-webkit-details-marker{ display:none; }

/* ======================
   WebAuthn ack row
====================== */

.ackRow{
  display:flex;
  gap: 10px;
  align-items:flex-start;
  line-height: 1.35;
  color: rgba(234,243,255,.82);
}
.ackRow input{
  margin-top: 2px;
  accent-color: rgba(120,255,231,.85);
}

/* ======================
   Long hash overflow (FINAL)
   - keeps Copy button visible
   - never lets hash push layout wider than card
====================== */

.hashRow{
  display:flex;
  align-items:center;
  gap: 10px;
  width: 100%;
  min-width: 0;
}
.hashRow > *{ min-width: 0; }

.hashRow .pill{
  flex: 1 1 auto;
  min-width: 0;
  max-width: 100%;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Make the left label never wrap awkwardly */
.hashRow .small{
  flex: 0 0 auto;
  white-space: nowrap;
}

/* If you want wrap instead of ellipsis, swap the .hashRow .pill rules with:
.hashRow .pill{
  flex: 1 1 auto;
  min-width:0;
  max-width:100%;
  white-space: normal;
  overflow-wrap: anywhere;
}
*/

/* ======================
   Overlay / “veil” fixes
   - ensure no pseudo-element sits above content
   - keep glass crisp
====================== */

.header, .card, .status{
  isolation: isolate; /* prevents blend/stack weirdness on iOS */
}

.header::before,
.card::after{
  mix-blend-mode: normal;
}

/* Extra: ensure nothing accidentally creates a full-page overlay */
.krystal-wrap::before,
.krystal-wrap::after{
  content: none !important;
}

/* ======================
   Mobile tightening
====================== */

@media (max-width: 520px){
  .krystal-wrap{ padding-left: 14px; padding-right: 14px; }
  .card-inner{ padding: 18px; }
  .header{ padding: 16px; }
  .title{ font-size: 20px; }
}

/* Reduce motion preference */
@media (prefers-reduced-motion: reduce){
  .btn, .pbi-nav a, .card, .header{ transition: none !important; }
}